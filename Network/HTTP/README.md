# HTTP란?

Hyper-Text Transfer Protocol over TCP/IP의 약자로 웹상의 네트워크 프로토콜을 의미한다.

# Server/Client 구조

<img width="403" alt="스크린샷 2020-01-09 오전 12 36 55" src="https://user-images.githubusercontent.com/43809168/71991748-33846380-3278-11ea-865d-9198e4dae3b1.png">

HTTP는 서버/클라이언트 구조이다.

자원을 갖고 있는 쪽을 서버, 자원을 요청하는 쪽을 클라이언트라고 부른다.

클라이언트는 서버에 자원을 요청(Request)하며, 서버는 그 요청에 대한 응답(Response)를 해주는 구조이다.



# HTTP 특징

1. Connectionless
- 연결을 유지하지 않는다. 데이터 송,수신이 끝나면 연결을 끊음
- 브라우저와 서버가 계속 연결되어 있지 않음.

2. Request-Response
- 한 컴퓨터가 요청을 보내면 다른 컴퓨터는 요청에 대한 응답을 보내는 방식을 의미한다.

3. Stateless
- 요청을 독립적인 트랜잭션으로 처리하는 것을 의미한다. 

- 즉, 요청이 들어왔을 때 서버는 통신 파트너에 대한 세션 정보나 상태를 보관하지 않는 것을 의미한다. 

- 이전 요청과 다음 요청간의 관계가 없기 때문에, 유저가 로그인을 한 후 페이지 이동을 하게 되면 유저는 다시 로그인을 해야한다. 이를 방지하기 위해 Stateful한 시스템을 개발해야 했기 때문에 쿠키와 세션이 등장하게 되었다.

# Stateless와 Connectionless의 문제점

HTTP 프로토콜은 **Connectionless**하며 **Stateless**한 특성을 갖는다.

이러한 특성 때문에 Server는 요청을 보낸 Client가 누구인지 식별할 수 없었다.

예를들어 쇼핑몰에 로그인을 하였는데 다음 페이지로 넘어갈때 마다 로그인을 새로 해야하는 현상이 발생하는 것이다. 

얼마나 짜증나겠는가?

때문에 이를 위해 쿠키와 세션이 등장하게 되었다.

이 쿠키와 세션을 이용하여 **Stateful**한 시스템을 개발할 수 있게 되는 것 이다.

# 쿠키 (Cookie)

쿠키는 클라이언트에 저장되는 키와 값이 들어있는 작은 데이터 파일이다.

이 쿠키는 사용자 정보를 컴퓨터에 파일로 남기기 때문에 누군가가 클라이언트의 컴퓨터에 접근하게 된다면 이 쿠키 정보를 열어볼 수 있는 **보안상 문제**가 발생할 수 있게 된다.

# 세션 (Session)

세션은 서버 메모리에 저장되는 연결 정보다.

서버에 저장되기 때문에 쿠키와 달리 노출 위험이 적다는 장점이 있다.

세션을 이용한 로그인 처리 과정은 다음과 같다.

1. 사용자가 로그인 페이지에서 ID/PW를 입력하고 로그인 버튼을 클릭

2. 서버에서 사용자가 보낸 ID/PW가 존재한다면 서버 메모리에 유니크한 세션 ID를 생성하고 ID와 매핑하여 저장

3. 클라이언트에서 세션 ID를 쿠키로 저장

4. 요청 시 서버는 Request Header에서 쿠키 정보(세션 ID)를 읽어 서버 메모리에 저장된 세션 ID와 매핑되는 사용자 ID를 인식

즉, 위와 같은 과정에서도 쿠키는 세션 ID를 저장하기 위해 사용된다.



## Reference

https://dalkomit.tistory.com/134

https://ourcstory.tistory.com/71